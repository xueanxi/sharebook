# ShareNovel 项目架构说明

## 项目概述

ShareNovel是一个小说处理和分析系统，提供小说爬取、信息提取和分析功能。

## 新的项目架构

```
sharenovel/
├── src/                          # 主要源代码目录
│   ├── core/                     # 核心业务逻辑
│   │   ├── agents/               # 智能代理
│   │   ├── models/               # 数据模型
│   │   └── workflows/            # 工作流定义
│   ├── services/                 # 服务层
│   │   ├── extraction/           # 信息提取服务
│   │   ├── crawling/             # 爬虫服务
│   │   └── analysis/             # 分析服务
│   ├── utils/                    # 工具函数
│   │   ├── text_processing/      # 文本处理工具
│   │   ├── file_handling/        # 文件处理工具
│   │   └── data_validation/      # 数据验证工具
│   └── api/                      # API接口
│       ├── rest/                 # REST API
│       └── cli/                  # 命令行接口
├── tests/                        # 测试代码
│   ├── unit/                     # 单元测试
│   └── integration/              # 集成测试
├── docs/                         # 文档
│   ├── api/                      # API文档
│   └── user_guide/               # 用户指南
├── scripts/                      # 脚本文件
├── data/                         # 数据目录
│   ├── raw/                      # 原始数据
│   ├── processed/                # 处理后的数据
│   └── output/                   # 输出结果
├── config/                       # 配置文件
└── requirements.txt              # 依赖包列表
```

## 各模块说明

### src/core
核心业务逻辑模块，包含系统的核心功能实现。

- **agents/**: 包含各种智能代理，如文本预处理代理、人物提取代理等
- **models/**: 定义数据模型和结构
- **workflows/**: 定义复杂的工作流程

### src/services
服务层模块，提供各种业务服务。

- **extraction/**: 信息提取服务，负责从文本中提取各种信息
- **crawling/**: 爬虫服务，负责从网络获取小说内容
- **analysis/**: 分析服务，负责对小说内容进行深度分析

### src/utils
工具函数模块，提供各种辅助功能。

- **text_processing/**: 文本处理相关的工具函数
- **file_handling/**: 文件处理相关的工具函数
- **data_validation/**: 数据验证相关的工具函数

### src/api
API接口模块，提供系统与外部交互的接口。

- **rest/**: REST API接口
- **cli/**: 命令行接口

### tests
测试代码模块，包含单元测试和集成测试。

- **unit/**: 单元测试，测试单个函数或类的功能
- **integration/**: 集成测试，测试多个组件协同工作的功能

### docs
文档模块，包含API文档和用户指南。

- **api/**: API文档，详细说明各个API的使用方法
- **user_guide/**: 用户指南，帮助用户了解如何使用系统

### scripts
脚本文件模块，包含各种辅助脚本。

### data
数据目录，存储各种数据。

- **raw/**: 原始数据，如爬取的小说文本
- **processed/**: 处理后的数据，如清洗后的文本
- **output/**: 输出结果，如分析结果和报告

## 重构计划

1. 将现有代码按照新架构重新组织
2. 创建适当的接口和抽象类
3. 实现依赖注入，提高代码的可测试性
4. 添加日志和错误处理机制
5. 完善测试覆盖率

## 优势

1. **模块化**: 各功能模块分离，降低耦合度
2. **可扩展性**: 易于添加新功能和模块
3. **可维护性**: 代码结构清晰，便于维护
4. **可测试性**: 各模块可独立测试
5. **可重用性**: 工具函数和服务可在多个地方重用